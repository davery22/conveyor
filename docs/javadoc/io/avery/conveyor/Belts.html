<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri Oct 27 15:34:43 MDT 2023 -->
<title>Belts</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-10-27">
<meta name="description" content="declaration: package: io.avery.conveyor, class: Belts">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.avery.conveyor</a></div>
<h1 title="Class Belts" class="title">Class Belts</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.avery.conveyor.Belts</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">Belts</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="preview-block" id="preview-io.avery.conveyor.Belts"><span class="preview-label"><code>Belts</code> relies on preview features of the Java platform:</span>
<ul class="preview-comment">
<li><code>Belts</code> refers to one or more preview APIs:  <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html" title="class or interface in java.util.concurrent" class="external-link"><code>StructuredTaskScope</code></a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html" title="class or interface in java.util.concurrent" class="external-link">T</a>&gt;.</li>
</ul>
<div class="preview-comment">Programs can only use <code>Belts</code> when preview features are enabled.</div>
<div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div>
</div>
<div class="block">Implementations of various useful <a href="Belt.Stage.html" title="interface in io.avery.conveyor"><code>Stages</code></a>, <a href="Belt.Segue.html" title="interface in io.avery.conveyor"><code>Segues</code></a>, and <code>Operators</code>.

 <p>In addition to any documented contracts, implementations here strictly follow structured concurrency - threads
 are spawned within lexical scopes that await their completion before exiting.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.SourceOperator.html" title="interface in io.avery.conveyor">Belt.SourceOperator</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#adaptSinkOfSource(io.avery.conveyor.Belt.StepSinkOperator,java.util.function.Consumer)" class="member-name-link">adaptSinkOfSource</a><wbr>(<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>U&gt;&nbsp;sinkMapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that connects the given <code>sinkMapper</code> before any sink that an upstream source drains to.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#adaptSourceOfSink(io.avery.conveyor.Belt.StepSourceOperator,java.util.function.Consumer)" class="member-name-link">adaptSourceOfSink</a><wbr>(<a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a>&lt;T,<wbr>U&gt;&nbsp;sourceMapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that connects the given <code>sourceMapper</code> after any source that a downstream sink drains
 from.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.SourceOperator.html" title="interface in io.avery.conveyor">Belt.SourceOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#alsoClose(io.avery.conveyor.Belt.Source)" class="member-name-link">alsoClose</a><wbr>(<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;?&gt;&nbsp;sourceToClose)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that also closes the given <code>sourceToClose</code> when an upstream source closes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#alsoComplete(io.avery.conveyor.Belt.Sink)" class="member-name-link">alsoComplete</a><wbr>(<a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&nbsp;sinkToComplete)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that also completes the given <code>sinkToComplete</code> when a downstream sink completes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#balance(java.util.Collection)" class="member-name-link">balance</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;? super T&gt;&gt;&nbsp;sinks)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-out sink that forwards each input element to the first available sink among the given
 <code>sinks</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.SinkToStepOperator.html" title="interface in io.avery.conveyor">Belt.SinkToStepOperator</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;T&gt;,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#balanceMergeSink(int)" class="member-name-link">balanceMergeSink</a><wbr>(int&nbsp;concurrency)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that balances computation of outputs across a limited number of concurrent workers.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepToSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepToSourceOperator</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;T&gt;,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#balanceMergeSource(int)" class="member-name-link">balanceMergeSource</a><wbr>(int&nbsp;concurrency)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that balances computation of outputs across a limited number of concurrent workers.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
A&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>A&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#batch(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.Function)" class="member-name-link">batch</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Supplier.html" title="class or interface in java.util.function" class="external-link">Supplier</a>&lt;? extends A&gt;&nbsp;batchSupplier,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;? super A,<wbr>? super T&gt;&nbsp;accumulator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super A,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&gt;&gt;&nbsp;deadlineMapper)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that accumulates pushed elements into a batch, permitting the batch to be yielded once a
 deadline expires.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#broadcast(java.util.Collection)" class="member-name-link">broadcast</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinks)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-out sink that forwards each input element to all the given <code>sinks</code>, until any sink cancels.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#buffer(int)" class="member-name-link">buffer</a><wbr>(int&nbsp;bufferLimit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that buffers pushed elements to respond to later pulls.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#composedClose(java.util.stream.Stream)" class="member-name-link">composedClose</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;?&gt;&gt;&nbsp;sources)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Closes each source, in encounter order.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#composedComplete(java.util.stream.Stream)" class="member-name-link">composedComplete</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&gt;&nbsp;sinks)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Completes each sink normally, in encounter order.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#composedCompleteAbruptly(java.util.stream.Stream,java.lang.Throwable)" class="member-name-link">composedCompleteAbruptly</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&gt;&nbsp;sinks,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Completes each sink abruptly, passing the given <code>cause</code>, in encounter order.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#concat(java.util.Collection)" class="member-name-link">concat</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;sources)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that yields all elements from each of the given <code>sources</code>, in turn.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#concatStep(java.util.Collection)" class="member-name-link">concatStep</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;sources)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that yields all elements from each of the given <code>sources</code>, in turn.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#delay(java.util.function.Function,int)" class="member-name-link">delay</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&gt;&nbsp;deadlineMapper,
 int&nbsp;bufferLimit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that calculates a deadline for each pushed element, buffering elements at least until their
 deadline expires.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#extrapolate(T,java.util.function.Function,int)" class="member-name-link">extrapolate</a><wbr>(T&nbsp;initial,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 int&nbsp;bufferLimit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that injects additional elements - derived from the last buffered element - to respond to a pull
 if no elements are buffered.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#filterMap(java.util.function.Function)" class="member-name-link">filterMap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends U&gt;&nbsp;mapper)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that applies the <code>mapper</code> to adapt or discard elements from an upstream source.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#flatMap(java.util.function.Function,java.util.function.Consumer)" class="member-name-link">flatMap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends U&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that replaces each element with the contents of a mapped source before it reaches a
 downstream sink.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
A,<wbr>
R&gt;&nbsp;<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a><wbr>&lt;T,<wbr>R&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#gather(io.avery.conveyor.Gatherer)" class="member-name-link">gather</a><wbr>(<a href="Gatherer.html" title="interface in io.avery.conveyor">Gatherer</a>&lt;? super T,<wbr>A,<wbr>R&gt;&nbsp;gatherer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that transforms elements according to the given <code>gatherer</code> before they reach a
 downstream sink.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
K&gt;&nbsp;<a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#groupBy(java.util.function.Function,boolean,java.util.function.Consumer,java.util.function.BiFunction)" class="member-name-link">groupBy</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends K&gt;&nbsp;classifier,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super K,<wbr>? super T,<wbr>? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinkFactory)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a sink that pushes input elements to the inner sink associated with the key that the <code>classifier</code>
 computes for the element.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#iteratorSource(java.util.Iterator)" class="member-name-link">iteratorSource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;T&gt;&nbsp;iterator)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a source that yields the elements from the given <code>iterator</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#iteratorSource(java.util.Iterator,java.lang.AutoCloseable)" class="member-name-link">iteratorSource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;T&gt;&nbsp;iterator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a>&nbsp;onClose)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a source that yields the elements from the given <code>iterator</code>, and performs the given <code>onClose</code>
 operation when closed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#keepAlive(java.time.Duration,java.util.function.Supplier,int)" class="member-name-link">keepAlive</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Supplier.html" title="class or interface in java.util.function" class="external-link">Supplier</a>&lt;? extends T&gt;&nbsp;extraSupplier,
 int&nbsp;bufferLimit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that injects an additional element to respond to a pull if no elements are buffered and a timeout
 expired since the last pull.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.SinkStepSource.html" title="interface in io.avery.conveyor">Belt.SinkStepSource</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#mapBalanceOrdered(int,int,java.util.function.Function)" class="member-name-link">mapBalanceOrdered</a><wbr>(int&nbsp;concurrency,
 int&nbsp;bufferLimit,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;? extends U&gt;&gt;&nbsp;mapper)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that balances computation of outputs across a limited number of concurrent workers, and orders
 outputs based on input arrival.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
K,<wbr>
U&gt;&nbsp;<a href="Belt.SinkStepSource.html" title="interface in io.avery.conveyor">Belt.SinkStepSource</a><wbr>&lt;T,<wbr>U&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#mapBalancePartitioned(int,int,int,java.util.function.Function,java.util.function.BiFunction)" class="member-name-link">mapBalancePartitioned</a><wbr>(int&nbsp;concurrency,
 int&nbsp;permitsPerPartition,
 int&nbsp;bufferLimit,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends K&gt;&nbsp;classifier,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T,<wbr>? super K,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;? extends U&gt;&gt;&nbsp;mapper)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that balances computation of outputs across a limited number of concurrent workers, further
 limiting concurrency per partition key, and orders outputs based on input arrival.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#merge(java.util.Collection)" class="member-name-link">merge</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;sources)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that yields each output element from the first available source among the given
 <code>sources</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#mergeSorted(java.util.Comparator,java.util.Collection)" class="member-name-link">mergeSorted</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;? super T&gt;&nbsp;comparator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;sources)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that yields the minimum of the latest elements from each of the given <code>sources</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#recover(java.util.function.Function,java.util.function.Consumer)" class="member-name-link">recover</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>,<wbr>? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that attempts to recover from abrupt completion before it reaches a downstream sink.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#recoverStep(java.util.function.Function,java.util.function.Consumer)" class="member-name-link">recoverStep</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>,<wbr>? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that attempts to recover from abrupt completion before it reaches a downstream sink.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#rendezvous()" class="member-name-link">rendezvous</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue in which each push to the sink must wait for a corresponding pull from the source, and vice
 versa.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T,<wbr>
U&gt;&nbsp;<a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#route(java.util.function.BiConsumer,boolean,java.util.List)" class="member-name-link">route</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;? super T,<wbr>? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr>U&gt;&gt;&nbsp;router,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super U&gt;&gt;&nbsp;sinks)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-out sink that selectively pushes zero or more replacement elements to the given <code>sinks</code>, per
 input element.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#scopeExecutor(java.util.concurrent.StructuredTaskScope)" class="member-name-link">scopeExecutor</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html" title="class or interface in java.util.concurrent" class="external-link">StructuredTaskScope</a><sup><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html#preview-java.util.concurrent.StructuredTaskScope" title="class or interface in java.util.concurrent" class="external-link">PREVIEW</a></sup>&lt;?&gt;&nbsp;scope)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link"><code>Executor</code></a> that delegates execution to the given <code>scope</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#split(java.util.function.Predicate,boolean,boolean,java.util.function.Consumer,java.util.function.Function)" class="member-name-link">split</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;? super T&gt;&nbsp;predicate,
 boolean&nbsp;splitAfter,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinkFactory)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a sink that pushes input elements to consecutive inner sinks, using the <code>predicate</code> to determine
 when to create each new sink.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#streamSource(java.util.stream.Stream)" class="member-name-link">streamSource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends T&gt;&nbsp;stream)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a source that yields the elements from the given <code>stream</code>, and closes the stream when closed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#synchronizeStepSink()" class="member-name-link">synchronizeStepSink</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that synchronizes access to a downstream sink's <code>push</code>, <code>complete</code>, and
 <code>completeAbruptly</code> methods.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#synchronizeStepSource()" class="member-name-link">synchronizeStepSource</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns an operator that synchronizes access to an upstream source's <code>pull</code> and <code>close</code> methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a><wbr>&lt;T,<wbr>T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#throttle(java.time.Duration,java.util.function.ToLongFunction,long,long)" class="member-name-link">throttle</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;tokenInterval,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/ToLongFunction.html" title="class or interface in java.util.function" class="external-link">ToLongFunction</a>&lt;? super T&gt;&nbsp;costMapper,
 long&nbsp;tokenLimit,
 long&nbsp;bufferLimit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a segue that uses a token-bucketing scheme to limit the rate at which pushed elements can be yielded.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T1,<wbr>
T2,<wbr>
T&gt;<br><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#zip(io.avery.conveyor.Belt.StepSource,io.avery.conveyor.Belt.StepSource,java.util.function.BiFunction)" class="member-name-link">zip</a><wbr>(<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T1&gt;&nbsp;source1,
 <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T2&gt;&nbsp;source2,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T1,<wbr>? super T2,<wbr>? extends T&gt;&nbsp;combiner)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that combines the latest elements from both sources once both sources yield a new
 element.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T1,<wbr>
T2,<wbr>
T&gt;<br><a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#zipLatest(io.avery.conveyor.Belt.Source,io.avery.conveyor.Belt.Source,java.util.function.BiFunction)" class="member-name-link">zipLatest</a><wbr>(<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T1&gt;&nbsp;source1,
 <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T2&gt;&nbsp;source2,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T1,<wbr>? super T2,<wbr>? extends T&gt;&nbsp;combiner)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a fan-in source that combines the latest elements from both sources once either source yields a new
 element.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="synchronizeStepSource()">
<h3>synchronizeStepSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">synchronizeStepSource</span>()</div>
<div class="block">Returns an operator that synchronizes access to an upstream source's <code>pull</code> and <code>close</code> methods. The
 resultant downstream source can be safely pulled concurrently, making it suitable for ad-hoc "balancing" use
 cases.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
     Belt.StepSource&lt;Integer&gt; source = Belts.iteratorSource(List.of(0, 1, 2).iterator()).andThen(Belts.synchronizeStepSource());
     Belt.StepSink&lt;Integer&gt; sink = ((Belt.StepSink&lt;Integer&gt;) list::add).compose(Belts.synchronizeStepSink());
     Belt.StepSource&lt;Integer&gt; noCloseSource = source::pull;

     Belts
         .merge(List.of(
             // These 2 sources will concurrently pull from the same upstream, effectively "balancing"
             noCloseSource.andThen(Belts.filterMap(i -&gt; i + 1)),
             noCloseSource.andThen(Belts.filterMap(i -&gt; i + 4))
         ))
         .andThen(Belts.alsoClose(source))
         .andThen(sink)
         .run(Belts.scopeExecutor(scope));

     scope.join();

     String result = list.stream().map(String::valueOf).collect(Collectors.joining());
     System.out.println(result);
     // Possible outputs:
     // 156; 516; 561; 246; 426; 462; 345; 435; 453; 456;
     // 423; 243; 234; 513; 153; 135; 612; 162; 126; 123;
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the source element type</dd>
<dt>Returns:</dt>
<dd>an operator that synchronizes access to an upstream source</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="synchronizeStepSink()">
<h3>synchronizeStepSink</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">synchronizeStepSink</span>()</div>
<div class="block">Returns an operator that synchronizes access to a downstream sink's <code>push</code>, <code>complete</code>, and
 <code>completeAbruptly</code> methods. The resultant upstream sink can be safely pushed to concurrently, making it
 suitable for ad-hoc "merging" use cases.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
     Belt.StepSource&lt;Integer&gt; source = Belts.iteratorSource(List.of(0, 1, 2).iterator()).andThen(Belts.synchronizeStepSource());
     Belt.StepSink&lt;Integer&gt; sink = ((Belt.StepSink&lt;Integer&gt;) list::add).compose(Belts.synchronizeStepSink());
     Belt.StepSink&lt;Integer&gt; noCompleteSink = sink::push;

     Belts
         .balance(List.of(
             // These 2 sinks will concurrently push to the same downstream, effectively "merging"
             noCompleteSink.compose(Belts.gather(Gatherers.map((Integer i) -&gt; i + 1))),
             noCompleteSink.compose(Belts.gather(Gatherers.map((Integer i) -&gt; i + 4)))
         ))
         .compose(Belts.alsoComplete(sink))
         .compose(source)
         .run(Belts.scopeExecutor(scope));

     scope.join();

     String result = list.stream().map(String::valueOf).collect(Collectors.joining());
     System.out.println(result);
     // Possible outputs:
     // 156; 516; 561; 246; 426; 462; 345; 435; 453; 456;
     // 423; 243; 234; 513; 153; 135; 612; 162; 126; 123;
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the sink element type</dd>
<dt>Returns:</dt>
<dd>an operator that synchronizes access to a downstream sink</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recoverStep(java.util.function.Function,java.util.function.Consumer)">
<h3>recoverStep</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">recoverStep</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>,<wbr>? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</span></div>
<div class="block">Returns an operator that attempts to recover from abrupt completion before it reaches a downstream sink. When the
 resultant upstream sink is completed abruptly, the <code>mapper</code> is applied to the cause to produce a source,
 which is then run and drained to the downstream sink. The downstream sink is then completed normally, and any
 running stations from the source are awaited.

 <p>If the <code>mapper</code> throws an exception, the downstream is completed abruptly with the original cause.
 Otherwise, if draining the created source or completing the downstream sink throws an exception, the downstream
 is completed abruptly with that exception as the cause.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
    Belt.Source&lt;Integer&gt; source = Belts.streamSource(
        Stream.iterate(1, i -&gt; {
            if (i &lt; 3) {
                return i + 1;
            }
            throw new IllegalStateException();
        })
    );

    source
        .andThen(Belts
            .recoverStep(
                cause -&gt; Belts.streamSource(Stream.of(7, 8, 9)),
                Throwable::printStackTrace
            )
            .andThen((Belt.StepSink&lt;Integer&gt;) list::add)
        )
        .run(Belts.scopeExecutor(scope));

    scope.join();

    System.out.println(list);
    // Prints: [1, 2, 3, 7, 8, 9]
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the sink element type</dd>
<dt>Parameters:</dt>
<dd><code>mapper</code> - a function that creates a source from an exception</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by the created source</dd>
<dt>Returns:</dt>
<dd>an operator that attempts to recover from abrupt completion before it reaches a downstream sink</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recover(java.util.function.Function,java.util.function.Consumer)">
<h3>recover</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">recover</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>,<wbr>? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</span></div>
<div class="block">Returns an operator that attempts to recover from abrupt completion before it reaches a downstream sink. When the
 resultant upstream sink is completed abruptly, the <code>mapper</code> is applied to the cause to produce a source,
 which is then run and drained to the downstream sink. The downstream sink is then completed normally, and any
 running stations from the source are awaited.

 <p>If the <code>mapper</code> throws an exception, the downstream is completed abruptly with the original cause.
 Otherwise, if draining the created source or completing the downstream sink throws an exception, the downstream
 is completed abruptly with that exception as the cause.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
    Iterator&lt;Integer&gt; iter = List.of(1, 2, 3).iterator();
    Belt.StepSource&lt;Integer&gt; source = () -&gt; {
        if (iter.hasNext()) {
            return iter.next();
        }
        throw new IllegalStateException();
    };

    source
        .andThen(Belts
            .recover(
                cause -&gt; Belts.iteratorSource(List.of(7, 8, 9).iterator()),
                Throwable::printStackTrace
            )
            .andThen((Belt.Sink&lt;Integer&gt;) src -&gt; {
                src.forEach(list::add);
                return true;
            })
        )
        .run(Belts.scopeExecutor(scope));

    scope.join();

    System.out.println(list);
    // Prints: [1, 2, 3, 7, 8, 9]
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the sink element type</dd>
<dt>Parameters:</dt>
<dd><code>mapper</code> - a function that creates a source from an exception</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by the created source</dd>
<dt>Returns:</dt>
<dd>an operator that attempts to recover from abrupt completion before it reaches a downstream sink</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="filterMap(java.util.function.Function)">
<h3>filterMap</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">filterMap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends U&gt;&nbsp;mapper)</span></div>
<div class="block">Returns an operator that applies the <code>mapper</code> to adapt or discard elements from an upstream source. For
 each upstream element, the resultant downstream source yields the result of applying the <code>mapper</code> to that
 element, or discards the element if the <code>mapper</code> returned <code>null</code>.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();

    Belts.iteratorSource(List.of(1, 2, 3, 4, 5, 6).iterator())
        .andThen(Belts.filterMap(i -&gt; i % 2 == 0 ? null : -i))
        .andThen((Belt.StepSink&lt;Integer&gt;) list::add)
        .run(Belts.scopeExecutor(scope));

    scope.join();

    System.out.println(list);
    // Prints: [-1, -3, -5]
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>mapper</code> - a function to be applied to the upstream elements</dd>
<dt>Returns:</dt>
<dd>an operator that applies the <code>mapper</code> to adapt or discard elements from an upstream source</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="alsoClose(io.avery.conveyor.Belt.Source)">
<h3>alsoClose</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SourceOperator.html" title="interface in io.avery.conveyor">Belt.SourceOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">alsoClose</span><wbr><span class="parameters">(<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;?&gt;&nbsp;sourceToClose)</span></div>
<div class="block">Returns an operator that also closes the given <code>sourceToClose</code> when an upstream source closes. The
 resultant downstream source will delegate to the upstream source, but also close the <code>sourceToClose</code> when
 closed, and run the <code>sourceToClose</code> when run.

 <p>This is useful when a source is shared among several downstream sources: Instead of each downstream source
 attempting to close the shared source when it closes - and potentially interfering with others - this operator
 allows a common parent of the downstream sources to handle closing the shared source when all are done using it.
 This is particularly important when the downstream sources may be closed at different times, or when closing the
 shared source is not idempotent.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
     Iterator&lt;Integer&gt; iter = List.of(0, 1, 2).iterator();
     Belt.StepSource&lt;Integer&gt; source = new Belt.StepSource&lt;Integer&gt;() {
         @Override public Integer pull() { return iter.hasNext() ? iter.next() : null; }
         @Override public void close() { System.out.print("000"); }
     }.andThen(Belts.synchronizeStepSource());
     Belt.StepSink&lt;Integer&gt; sink = ((Belt.StepSink&lt;Integer&gt;) list::add).compose(Belts.synchronizeStepSink());
     Belt.StepSource&lt;Integer&gt; noCloseSource = source::pull;

     Belts
         .merge(List.of(
             // These 2 sources will concurrently pull from the same upstream, effectively "balancing"
             noCloseSource.andThen(Belts.filterMap(i -&gt; i + 1)),
             noCloseSource.andThen(Belts.filterMap(i -&gt; i + 4))
         ))
         .andThen(Belts.alsoClose(source))
         .andThen(sink)
         .run(Belts.scopeExecutor(scope));

     scope.join();

     String result = list.stream().map(String::valueOf).collect(Collectors.joining());
     System.out.println(result);
     // Possible outputs:
     // 000156; 000516; 000561; 000246; 000426; 000462; 000345; 000435; 000453; 000456;
     // 000423; 000243; 000234; 000513; 000153; 000135; 000612; 000162; 000126; 000123
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sourceToClose</code> - the additional source to close</dd>
<dt>Returns:</dt>
<dd>an operator that also closes the given <code>sourceToClose</code> when an upstream source closes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="alsoComplete(io.avery.conveyor.Belt.Sink)">
<h3>alsoComplete</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">alsoComplete</span><wbr><span class="parameters">(<a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&nbsp;sinkToComplete)</span></div>
<div class="block">Returns an operator that also completes the given <code>sinkToComplete</code> when a downstream sink completes. The
 resultant upstream sink will delegate to the downstream sink, but also complete the <code>sinkToComplete</code> when
 completed (normally or abruptly), and run the <code>sinkToComplete</code> when run.

 <p>This is useful when a sink is shared among several upstream sinks: Instead of each upstream sink attempting to
 complete the shared sink when it completes - and potentially interfering with others - this operator allows a
 common parent of the upstream sinks to handle closing the shared sink when all are done using it. This is
 particularly important when the upstream sinks may be completed at different times, or when completing the shared
 sink is not idempotent.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
     Belt.StepSource&lt;Integer&gt; source = Belts.iteratorSource(List.of(0, 1, 2).iterator()).andThen(Belts.synchronizeStepSource());
     Belt.StepSink&lt;Integer&gt; sink = new Belt.StepSink&lt;Integer&gt;() {
         @Override public boolean push(Integer input) { return list.add(input); }
         @Override public void complete() { list.addAll(List.of(0, 0, 0)); }
     }.compose(Belts.synchronizeStepSink());
     Belt.StepSink&lt;Integer&gt; noCompleteSink = sink::push;

     Belts
         .balance(List.of(
             // These 2 sinks will concurrently push to the same downstream, effectively "merging"
             noCompleteSink.compose(Belts.gather(map((Integer i) -&gt; i + 1))),
             noCompleteSink.compose(Belts.gather(map((Integer i) -&gt; i + 4)))
         ))
         .compose(Belts.alsoComplete(sink))
         .compose(source)
         .run(Belts.scopeExecutor(scope));

     scope.join();

     String result = list.stream().map(String::valueOf).collect(Collectors.joining());
     System.out.println(result);
     // Possible outputs:
     // 156000; 516000; 561000; 246000; 426000; 462000; 345000; 435000; 453000; 456000;
     // 423000; 243000; 234000; 513000; 153000; 135000; 612000; 162000; 126000; 123000
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sinkToComplete</code> - the additional sink to complete</dd>
<dt>Returns:</dt>
<dd>an operator that also completes the given <code>sinkToComplete</code> when a downstream sink completes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="split(java.util.function.Predicate,boolean,boolean,java.util.function.Consumer,java.util.function.Function)">
<h3>split</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;T&gt;</span>&nbsp;<span class="element-name">split</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;? super T&gt;&nbsp;predicate,
 boolean&nbsp;splitAfter,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinkFactory)</span></div>
<div class="block">Returns a sink that pushes input elements to consecutive inner sinks, using the <code>predicate</code> to determine
 when to create each new sink. When the <code>predicate</code> returns <code>true</code> for an element, the current inner
 sink is completed and its running stations awaited, then a new inner sink is created by passing the element to
 the <code>sinkFactory</code>, and the new sink is run.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     // In this example, the consecutive inner sinks push to a shared sink, effectively "concatenating"
     List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
     Belt.StepSink&lt;Integer&gt; sink = list::add;
     Belt.StepSink&lt;Integer&gt; noCompleteSink = sink::push;

     Belts.iteratorSource(List.of(0, 1, 2, 3, 4, 5).iterator())
         .andThen(Belts
             .split(
                 (Integer i) -&gt; i % 2 == 0, // Starts a new sink when element is even
                 false, false,
                 Throwable::printStackTrace,
                 i -&gt; noCompleteSink.compose(Belts.flatMap(j -&gt; Belts.streamSource(Stream.of(j, i)),
                                                           Throwable::printStackTrace))
             )
             .compose(Belts.alsoComplete(sink))
         )
         .run(Belts.scopeExecutor(scope));

     scope.join();
     System.out.println(list);
     // Prints: [0, 0, 1, 0, 2, 2, 3, 2, 4, 4, 5, 4]
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>predicate</code> - a predicate to be applied to the input elements</dd>
<dd><code>splitAfter</code> - if <code>true</code>, an element that passes the <code>predicate</code> will cause a new inner sink to be
                   created starting with the next element, rather than the current element</dd>
<dd><code>eagerCancel</code> - if <code>true</code>, cancels draining when the first inner sink cancels; else never cancels</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by created sinks</dd>
<dd><code>sinkFactory</code> - a function that creates a sink, using the first element that will be pushed to that sink</dd>
<dt>Returns:</dt>
<dd>a sink that pushes input elements to consecutive inner sinks, delimited by passing <code>predicate</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="groupBy(java.util.function.Function,boolean,java.util.function.Consumer,java.util.function.BiFunction)">
<h3>groupBy</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
K&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;T&gt;</span>&nbsp;<span class="element-name">groupBy</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends K&gt;&nbsp;classifier,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super K,<wbr>? super T,<wbr>? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinkFactory)</span></div>
<div class="block">Returns a sink that pushes input elements to the inner sink associated with the key that the <code>classifier</code>
 computes for the element. When the <code>classifier</code> computes a previously-unseen key for an element, the
 <code>sinkFactory</code> is called with the key and element to create a new inner sink, which is then run. That first
 element, and subsequent elements that map to the same key, are pushed to that sink until the sink cancels.

 <p>If <code>eagerCancel</code> is <code>true</code>, and any inner sink cancels, all inner sinks will be completed and
 running stations awaited, before the outer sink cancels. If <code>eagerCancel</code> is <code>false</code>, and any inner
 sink cancels, it will be completed and its running stations awaited, before the outer sink resumes. Subsequent
 elements that map to the canceled sink's key will be discarded.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code> try (var scope = new StructuredTaskScope&lt;&gt;()) {
     // In this example, the concurrent inner sinks push to a shared sink, effectively "merging"
     List&lt;String&gt; list = new ArrayList&lt;&gt;();
     Belt.StepSink&lt;String&gt; sink = list::add;
     Belt.StepSink&lt;String&gt; noCompleteSink = sink::push;

     Belts.iteratorSource(List.of("now", "or", "never").iterator())
         .andThen(Belts
             .groupBy(
                 (String s) -&gt; s.substring(0, 1),
                 false,
                 Throwable::printStackTrace,
                 (k, first) -&gt; noCompleteSink.compose(Belts.flatMap(s -&gt; Belts.streamSource(Stream.of(k, s, first)),
                                                                    Throwable::printStackTrace))
             )
             .compose(Belts.alsoComplete(sink))
         )
         .run(Belts.scopeExecutor(scope));

     scope.join();
     System.out.println(list);
     // Prints: [n, now, now, o, or, or, n, never, now]
 }
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dd><code>K</code> - the key type</dd>
<dt>Parameters:</dt>
<dd><code>classifier</code> - a classifier function mapping input elements to keys</dd>
<dd><code>eagerCancel</code> - if <code>true</code>, cancels draining when the first inner sink cancels; else never cancels</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by created sinks</dd>
<dd><code>sinkFactory</code> - a function that creates a sink, using a key and the first element that will be pushed to that
                    sink</dd>
<dt>Returns:</dt>
<dd>a sink that pushes input elements to the inner sink associated with the key computed for the element</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="flatMap(java.util.function.Function,java.util.function.Consumer)">
<h3>flatMap</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">flatMap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends U&gt;&gt;&nbsp;mapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</span></div>
<div class="block">Returns an operator that replaces each element with the contents of a mapped source before it reaches a
 downstream sink. The resultant upstream sink will apply the <code>mapper</code> to each element to produce a mapped
 source, run the source, push its contents downstream, then close it and await its running stations. (If a mapped
 source is <code>null</code>, it is discarded.)

 <p>If the mapped sources are known to never enclose stations / cross asynchronous boundaries, it may be possible
 to replace usage of this operator with the <a href="#gather(io.avery.conveyor.Gatherer)"><code>gather</code></a> operator and a flat-mapping
 <a href="Gatherer.html" title="interface in io.avery.conveyor"><code>Gatherer</code></a>.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;String&gt; list = new ArrayList&lt;&gt;();

    Belts.iteratorSource(List.of("red", "blue", "green").iterator())
        .andThen(Belts
            .flatMap(
                (String color) -&gt; Belts.streamSource(Stream.of("color", color))
                    .andThen(Belts.buffer(256)),
                Throwable::printStackTrace
            )
            .andThen((Belt.StepSink&lt;String&gt;) list::add)
        )
        .run(Belts.scopeExecutor(scope));

    scope.join();
    System.out.println(list);
    // Prints: [color, red, color, blue, color, green]
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>mapper</code> - a function to be applied to the upstream elements, producing a mapped source</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by created sources</dd>
<dt>Returns:</dt>
<dd>an operator that replaces each element with the contents of a mapped source</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adaptSourceOfSink(io.avery.conveyor.Belt.StepSourceOperator,java.util.function.Consumer)">
<h3>adaptSourceOfSink</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SinkOperator.html" title="interface in io.avery.conveyor">Belt.SinkOperator</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">adaptSourceOfSink</span><wbr><span class="parameters">(<a href="Belt.StepSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepSourceOperator</a>&lt;T,<wbr>U&gt;&nbsp;sourceMapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</span></div>
<div class="block">Returns an operator that connects the given <code>sourceMapper</code> after any source that a downstream sink drains
 from. The resultant upstream sink will wrap any upstream source it drains from, to discard close signals, and
 then apply the <code>sourceMapper</code> to create a downstream source. The downstream source is then run, drained
 from, and closed, and its running stations are awaited.

 <p>The effect of this operator is similar, but not equivalent to, connecting the <code>sourceMapper</code> after the
 upstream source, and then connecting the downstream sink after that. However, since close signals are expected to
 be handled externally from draining, any close signals that reach the upstream source during draining are
 discarded.

 <p>This operator is intended for use cases where either the caller does not have access to the source (eg, an API
 that must return a sink), or the sink is part of a fan-out, and does not intend to change the behavior of the
 source for other sinks. For best performance, it is recommended to chain subsequent operations onto the
 <code>sourceMapper</code> passed to this operator, rather than chaining calls to this operator.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;();
    List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;();

    Belts.iteratorSource(List.of(1, 2, 3).iterator())
        .andThen(Belts.synchronizeStepSource())
        .andThen(Belts.balance(List.of(
            (Belt.StepSink&lt;Integer&gt;) list1::add,
            ((Belt.StepSink&lt;Integer&gt;) list2::add)
                .compose(Belts.adaptSourceOfSink(
                    Belts.filterMap(i -&gt; 10 - i),
                    Throwable::printStackTrace
                ))
        )))
        .run(Belts.scopeExecutor(scope));

    scope.join();

    String result = Stream.concat(list1.stream(), list2.stream()).map(String::valueOf).collect(Collectors.joining());
    System.out.println(result);
    // Possible outputs:
    // 187; 817; 871; 297; 927; 972; 398; 938; 983; 987;
    // 923; 293; 239; 813; 183; 138; 712; 172; 127; 123
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>sourceMapper</code> - an operator that connects after an upstream source to produce a downstream source</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by the created downstream source</dd>
<dt>Returns:</dt>
<dd>an operator that connects the given <code>sourceMapper</code> after any source that a downstream sink drains
 from</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adaptSinkOfSource(io.avery.conveyor.Belt.StepSinkOperator,java.util.function.Consumer)">
<h3>adaptSinkOfSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SourceOperator.html" title="interface in io.avery.conveyor">Belt.SourceOperator</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">adaptSinkOfSource</span><wbr><span class="parameters">(<a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>U&gt;&nbsp;sinkMapper,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&gt;&nbsp;asyncExceptionHandler)</span></div>
<div class="block">Returns an operator that connects the given <code>sinkMapper</code> before any sink that an upstream source drains to.
 The resultant downstream source will wrap any downstream sink it drains to, to discard completion signals, and
 then apply the <code>sinkMapper</code> to create an upstream sink. The upstream sink is then run, drained to, and
 completed, and its running stations are awaited.

 <p>The effect of this operator is similar, but not equivalent to, connecting the <code>sinkMapper</code> before the
 downstream sink, and then connecting the upstream source before that. However, since completion signals are
 expected to be handled externally from draining, any completion signals that reach the downstream sink during
 draining are discarded.

 <p>This operator is intended for use cases where either the caller does not have access to the sink (eg, an API
 that must return a source), or the source is part of a fan-in, and does not intend to change the behavior of the
 sink for other sources. For best performance, it is recommended to chain subsequent operations onto the
 <code>sinkMapper</code> passed to this operator, rather than chaining calls to this operator.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
    Belt.StepSink&lt;Integer&gt; sink = ((Belt.StepSink&lt;Integer&gt;) list::add).compose(Belts.synchronizeStepSink());

    Belts
        .merge(List.of(
            Belts.streamSource(Stream.of(9)),
            Belts.streamSource(Stream.of(2))
                .andThen(Belts.adaptSinkOfSource(
                    Belts.flatMap(i -&gt; Belts.streamSource(Stream.of(i, i+1, i+2)),
                                  Throwable::printStackTrace),
                    Throwable::printStackTrace
                ))
        ))
        .andThen(sink)
        .run(Belts.scopeExecutor(scope));

    scope.join();

    String result = list.stream().map(String::valueOf).collect(Collectors.joining());
    System.out.println(result);
    // Possible outputs:
    // 9234; 2934; 2394; 2349
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>sinkMapper</code> - an operator that connects before a downstream sink to produce an upstream sink</dd>
<dd><code>asyncExceptionHandler</code> - a function that consumes any exceptions thrown when asynchronously running stations
                              enclosed by the created upstream sink</dd>
<dt>Returns:</dt>
<dd>an operator that connects the given <code>sinkMapper</code> before any sink that an upstream source drains to</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="gather(io.avery.conveyor.Gatherer)">
<h3>gather</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
A,<wbr>
R&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSinkOperator.html" title="interface in io.avery.conveyor">Belt.StepSinkOperator</a>&lt;T,<wbr>R&gt;</span>&nbsp;<span class="element-name">gather</span><wbr><span class="parameters">(<a href="Gatherer.html" title="interface in io.avery.conveyor">Gatherer</a>&lt;? super T,<wbr>A,<wbr>R&gt;&nbsp;gatherer)</span></div>
<div class="block">Returns an operator that transforms elements according to the given <code>gatherer</code> before they reach a
 downstream sink. The resultant upstream sink will call the gatherer's initializer upon first push to initialize
 state, call the integrator on each push to pass elements downstream, and call the finisher on (normal)
 completion. (The gatherer's combiner is not used.)

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>try (var scope = new StructuredTaskScope&lt;&gt;()) {
    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();

    Belts.streamSource(Stream.of(1, 2, 3))
        .andThen(
            Belts.gather(Gatherers.map((Integer i) -&gt; i * 2))
                .andThen((Belt.StepSink&lt;Integer&gt;) list::add)
        )
        .run(Belts.scopeExecutor(scope));

    scope.join();
    System.out.println(list);
    // Prints: [2, 4, 6]
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>A</code> - the gatherer's accumulation type</dd>
<dd><code>R</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>gatherer</code> - the gatherer</dd>
<dt>Returns:</dt>
<dd>an operator that transforms elements according to the given <code>gatherer</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mapBalancePartitioned(int,int,int,java.util.function.Function,java.util.function.BiFunction)">
<h3>mapBalancePartitioned</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
K,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SinkStepSource.html" title="interface in io.avery.conveyor">Belt.SinkStepSource</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">mapBalancePartitioned</span><wbr><span class="parameters">(int&nbsp;concurrency,
 int&nbsp;permitsPerPartition,
 int&nbsp;bufferLimit,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends K&gt;&nbsp;classifier,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T,<wbr>? super K,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;? extends U&gt;&gt;&nbsp;mapper)</span></div>
<div class="block">Returns a segue that balances computation of outputs across a limited number of concurrent workers, further
 limiting concurrency per partition key, and orders outputs based on input arrival.

 <p>The number of concurrent workers created when draining is controlled by the given <code>concurrency</code>. The
 number of workers allowed to work on the same partition at once is controlled by the given
 <code>permitsPerPartition</code>. If <code>permitsPerPartition</code> is greater than or equal to <code>concurrency</code>, this
 segue gracefully degrades to <a href="#mapBalanceOrdered(int,int,java.util.function.Function)"><code>mapBalanceOrdered</code></a>.

 <p>When a worker pulls an element, it first invokes the <code>classifier</code> on the element to determine a
 partition key. If the partition key is <code>null</code>, the worker will throw a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link"><code>NullPointerException</code></a>.
 Otherwise, the worker will add the element to a pending output buffer, first waiting until the buffer is not full
 (size is below <code>bufferLimit</code>). Then, if the worker can acquire a partition permit, it will begin work on
 the element, calling the <code>mapper</code> and then the resultant callable, before signaling a completed output and
 releasing its permit. Otherwise, the worker will arrange for the element to be picked up when a permit becomes
 available, and resume pulling.

 <p>The <code>classifier</code> is invoked on elements in the order they arrived. The <code>mapper</code> is invoked on
 elements with the same partition key in the order they arrived, but no particular order is guaranteed for
 elements with different partition keys. Output elements are polled from the buffer in the order that their
 associated input elements arrived (so completed outputs may be held up by earlier incomplete outputs).

 <p>If a callable returns <code>null</code>, its output is discarded. If a worker throws an exception for any reason -
 including because the <code>classifier</code>, <code>mapper</code>, or callable threw an exception - the remaining workers
 are interrupted and awaited, and all elements starting with the first incomplete output are cleared from the
 buffer.

 <p>The segue's source can be safely pulled and closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>K</code> - the key type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>concurrency</code> - the (positive) number of worker threads</dd>
<dd><code>permitsPerPartition</code> - the (positive) maximum number of workers that can concurrently work on the same
                            partition</dd>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dd><code>classifier</code> - a classifier function mapping input elements to keys</dd>
<dd><code>mapper</code> - a function to be applied to each input element and its partition key, returning an output-producing
               callable</dd>
<dt>Returns:</dt>
<dd>a segue that balances computation of outputs across workers, also limiting concurrency per partition key,
 while retaining element order.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mapBalanceOrdered(int,int,java.util.function.Function)">
<h3>mapBalanceOrdered</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.SinkStepSource.html" title="interface in io.avery.conveyor">Belt.SinkStepSource</a>&lt;T,<wbr>U&gt;</span>&nbsp;<span class="element-name">mapBalanceOrdered</span><wbr><span class="parameters">(int&nbsp;concurrency,
 int&nbsp;bufferLimit,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;? extends U&gt;&gt;&nbsp;mapper)</span></div>
<div class="block">Returns a segue that balances computation of outputs across a limited number of concurrent workers, and orders
 outputs based on input arrival. The number of concurrent workers created when draining is controlled by the given
 <code>concurrency</code>.

 <p>When a worker pulls an element, it adds the element to a pending output buffer, first waiting until the buffer
 is not full (size is below <code>bufferLimit</code>). Then, the worker will begin work on the element, calling the
 <code>mapper</code> and then the resultant callable, before signaling a completed output.

 <p>The <code>mapper</code> is invoked on elements in the order they arrived. Output elements are polled from the
 buffer in the order that their associated input elements arrived (so completed outputs may be held up by earlier
 incomplete outputs).

 <p>If a callable returns <code>null</code>, its output is discarded. If a worker throws an exception for any reason -
 including because the <code>mapper</code> or callable threw an exception - the remaining workers are interrupted and
 awaited, and all elements starting with the first incomplete output are cleared from the buffer.

 <p>The segue's source can be safely pulled and closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>concurrency</code> - the (positive) number of worker threads</dd>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dd><code>mapper</code> - a function to be applied to each input element, returning an output-producing callable</dd>
<dt>Returns:</dt>
<dd>a segue that balances computation of outputs across workers, while retaining element order</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="balanceMergeSource(int)">
<h3>balanceMergeSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>
<span class="return-type"><a href="Belt.StepToSourceOperator.html" title="interface in io.avery.conveyor">Belt.StepToSourceOperator</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;T&gt;,<wbr>T&gt;</span>&nbsp;<span class="element-name">balanceMergeSource</span><wbr><span class="parameters">(int&nbsp;concurrency)</span></div>
<div class="block">Returns an operator that balances computation of outputs across a limited number of concurrent workers. The
 resultant downstream source yields output elements as they complete, which may not match the order that inputs
 arrived. Any <code>null</code> outputs are discarded.

 <p>This operator assumes that the upstream source supports concurrent pulling, and any downstream sink supports
 concurrent pushing. If necessary, this support can be patched-in using the <a href="#synchronizeStepSource()"><code>synchronizeStepSource()</code></a> and
 <a href="#synchronizeStepSink()"><code>synchronizeStepSink()</code></a> operators.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the output element type</dd>
<dt>Parameters:</dt>
<dd><code>concurrency</code> - the (positive) number of worker threads</dd>
<dt>Returns:</dt>
<dd>an operator that balances computation of outputs across workers</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="balanceMergeSink(int)">
<h3>balanceMergeSink</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>
<span class="return-type"><a href="Belt.SinkToStepOperator.html" title="interface in io.avery.conveyor">Belt.SinkToStepOperator</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;T&gt;,<wbr>T&gt;</span>&nbsp;<span class="element-name">balanceMergeSink</span><wbr><span class="parameters">(int&nbsp;concurrency)</span></div>
<div class="block">Returns an operator that balances computation of outputs across a limited number of concurrent workers. The
 resultant upstream sink pushes output elements downstream as they complete, which may not match the order that
 inputs arrived. Any <code>null</code> outputs are discarded.

 <p>This operator assumes that the downstream sink supports concurrent pushing, and any upstream source supports
 concurrent pulling. If necessary, this support can be patched-in using the <a href="#synchronizeStepSink()"><code>synchronizeStepSink()</code></a> and
 <a href="#synchronizeStepSource()"><code>synchronizeStepSource()</code></a> operators.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the output element type</dd>
<dt>Parameters:</dt>
<dd><code>concurrency</code> - the (positive) number of worker threads</dd>
<dt>Returns:</dt>
<dd>an operator that balances computation of outputs across workers</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="balance(java.util.Collection)">
<h3>balance</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;T&gt;</span>&nbsp;<span class="element-name">balance</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;? super T&gt;&gt;&nbsp;sinks)</span></div>
<div class="block">Returns a fan-out sink that forwards each input element to the first available sink among the given
 <code>sinks</code>.

 <p>This sink assumes that any upstream source supports concurrent pulling. If necessary, this support can be
 patched-in using the <a href="#synchronizeStepSource()"><code>synchronizeStepSource()</code></a> operator.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sinks</code> - the sinks</dd>
<dt>Returns:</dt>
<dd>a fan-out sink that forwards each input element to the first available sink among the given <code>sinks</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="broadcast(java.util.Collection)">
<h3>broadcast</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;T&gt;</span>&nbsp;<span class="element-name">broadcast</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super T&gt;&gt;&nbsp;sinks)</span></div>
<div class="block">Returns a fan-out sink that forwards each input element to all the given <code>sinks</code>, until any sink cancels.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sinks</code> - the sinks</dd>
<dt>Returns:</dt>
<dd>a fan-out sink that forwards each input element to all the given <code>sinks</code>, until any sink cancels</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="route(java.util.function.BiConsumer,boolean,java.util.List)">
<h3>route</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
U&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;T&gt;</span>&nbsp;<span class="element-name">route</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;? super T,<wbr>? super <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr>U&gt;&gt;&nbsp;router,
 boolean&nbsp;eagerCancel,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;? extends <a href="Belt.StepSink.html" title="interface in io.avery.conveyor">Belt.StepSink</a>&lt;? super U&gt;&gt;&nbsp;sinks)</span></div>
<div class="block">Returns a fan-out sink that selectively pushes zero or more replacement elements to the given <code>sinks</code>, per
 input element. The <code>router</code> is applied to each input element in conjunction with a
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link"><code>biConsumer</code></a> that accepts the index of a sink in the given <code>sinks</code>, and a replacement
 element. The <code>router</code> calls the biConsumer zero or more times to provide the replacement elements.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>U</code> - the downstream element type</dd>
<dt>Parameters:</dt>
<dd><code>router</code> - a function that pushes replacement elements to selected sinks</dd>
<dd><code>eagerCancel</code> - if <code>true</code>, cancels when any sink cancels; else cancels when all sinks cancel</dd>
<dd><code>sinks</code> - the sinks</dd>
<dt>Returns:</dt>
<dd>a fan-out sink that selectively pushes zero or more replacement elements to each of the given
 <code>sinks</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="concatStep(java.util.Collection)">
<h3>concatStep</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;T&gt;</span>&nbsp;<span class="element-name">concatStep</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;sources)</span></div>
<div class="block">Returns a fan-in source that yields all elements from each of the given <code>sources</code>, in turn.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sources</code> - the sources</dd>
<dt>Returns:</dt>
<dd>a fan-in source that yields all elements from each of the given <code>sources</code>, in turn</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="concat(java.util.Collection)">
<h3>concat</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;T&gt;</span>&nbsp;<span class="element-name">concat</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;sources)</span></div>
<div class="block">Returns a fan-in source that yields all elements from each of the given <code>sources</code>, in turn.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sources</code> - the sources</dd>
<dt>Returns:</dt>
<dd>a fan-in source that yields all elements from each of the given <code>sources</code>, in turn</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="merge(java.util.Collection)">
<h3>merge</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;T&gt;</span>&nbsp;<span class="element-name">merge</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T&gt;&gt;&nbsp;sources)</span></div>
<div class="block">Returns a fan-in source that yields each output element from the first available source among the given
 <code>sources</code>.

 <p>This source assumes that any downstream sink supports concurrent pushing. If necessary, this support can be
 patched-in using the <a href="#synchronizeStepSink()"><code>synchronizeStepSink()</code></a> operator.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>sources</code> - the sources</dd>
<dt>Returns:</dt>
<dd>a fan-in source that yields each output element from the first available source among the given
 <code>sources</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mergeSorted(java.util.Comparator,java.util.Collection)">
<h3>mergeSorted</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;T&gt;</span>&nbsp;<span class="element-name">mergeSorted</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;? super T&gt;&nbsp;comparator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;? extends <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T&gt;&gt;&nbsp;sources)</span></div>
<div class="block">Returns a fan-in source that yields the minimum of the latest elements from each of the given <code>sources</code>.
 The minimum element is determined by the <code>comparator</code>.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>comparator</code> - the comparator used to sort elements</dd>
<dd><code>sources</code> - the sources</dd>
<dt>Returns:</dt>
<dd>a fan-in source that yields the minimum of the latest elements from each of the given <code>sources</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="zip(io.avery.conveyor.Belt.StepSource,io.avery.conveyor.Belt.StepSource,java.util.function.BiFunction)">
<h3>zip</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T1,<wbr>
T2,<wbr>
T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;T&gt;</span>&nbsp;<span class="element-name">zip</span><wbr><span class="parameters">(<a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T1&gt;&nbsp;source1,
 <a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;? extends T2&gt;&nbsp;source2,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T1,<wbr>? super T2,<wbr>? extends T&gt;&nbsp;combiner)</span></div>
<div class="block">Returns a fan-in source that combines the latest elements from both sources once both sources yield a new
 element. The latest elements are combined using the given <code>combiner</code>, and the result is yielded.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T1</code> - the first source's element type</dd>
<dd><code>T2</code> - the second source's element type</dd>
<dd><code>T</code> - the combined element type</dd>
<dt>Parameters:</dt>
<dd><code>source1</code> - the first source</dd>
<dd><code>source2</code> - the second source</dd>
<dd><code>combiner</code> - a function used to combine elements from each source</dd>
<dt>Returns:</dt>
<dd>a fan-in source that combines the latest elements from both sources once both sources yield a new element</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="zipLatest(io.avery.conveyor.Belt.Source,io.avery.conveyor.Belt.Source,java.util.function.BiFunction)">
<h3>zipLatest</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T1,<wbr>
T2,<wbr>
T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;T&gt;</span>&nbsp;<span class="element-name">zipLatest</span><wbr><span class="parameters">(<a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T1&gt;&nbsp;source1,
 <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;? extends T2&gt;&nbsp;source2,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html" title="class or interface in java.util.function" class="external-link">BiFunction</a>&lt;? super T1,<wbr>? super T2,<wbr>? extends T&gt;&nbsp;combiner)</span></div>
<div class="block">Returns a fan-in source that combines the latest elements from both sources once either source yields a new
 element. The latest elements are combined using the given <code>combiner</code>, and the result is yielded.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T1</code> - the first source's element type</dd>
<dd><code>T2</code> - the second source's element type</dd>
<dd><code>T</code> - the combined element type</dd>
<dt>Parameters:</dt>
<dd><code>source1</code> - the first source</dd>
<dd><code>source2</code> - the second source</dd>
<dd><code>combiner</code> - a function used to combine elements from each source</dd>
<dt>Returns:</dt>
<dd>a fan-in source that combines the latest elements from both sources once either source yields a new
 element</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rendezvous()">
<h3>rendezvous</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">rendezvous</span>()</div>
<div class="block">Returns a segue in which each push to the sink must wait for a corresponding pull from the source, and vice
 versa. In many cases, the <a href="#buffer(int)"><code>buffer</code></a> method is preferable to this method, as buffering provides
 leeway for an upstream and downstream to temporarily proceed at different rates.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Returns:</dt>
<dd>a segue in which each push to the sink must wait for a corresponding pull from the source, and vice
 versa</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buffer(int)">
<h3>buffer</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">buffer</span><wbr><span class="parameters">(int&nbsp;bufferLimit)</span></div>
<div class="block">Returns a segue that buffers pushed elements to respond to later pulls. If the buffer is empty, pulls will
 block. If the buffer is full (size equals <code>bufferLimit</code>), pushes will block. Buffering provides leeway for
 an upstream and downstream to temporarily proceed at different rates.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dt>Returns:</dt>
<dd>a segue that buffers pushed elements to respond to later pulls</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="extrapolate(T,java.util.function.Function,int)">
<h3 id="extrapolate(java.lang.Object,java.util.function.Function,int)">extrapolate</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">extrapolate</span><wbr><span class="parameters">(T&nbsp;initial,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr>? extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;? extends T&gt;&gt;&nbsp;mapper,
 int&nbsp;bufferLimit)</span></div>
<div class="block">Returns a segue that injects additional elements - derived from the last buffered element - to respond to a pull
 if no elements are buffered. Injection stops once all injected elements are yielded, or a subsequent element is
 buffered.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>initial</code> - an initial element to seed the buffer; ignored if <code>null</code></dd>
<dd><code>mapper</code> - a function that expands an element to an iterator of zero or more elements to inject</dd>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dt>Returns:</dt>
<dd>a segue that injects additional elements - derived from the last buffered element - to respond to a pull
 if no elements are buffered</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="batch(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.Function)">
<h3>batch</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>
A&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>A&gt;</span>&nbsp;<span class="element-name">batch</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Supplier.html" title="class or interface in java.util.function" class="external-link">Supplier</a>&lt;? extends A&gt;&nbsp;batchSupplier,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;? super A,<wbr>? super T&gt;&nbsp;accumulator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super A,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&gt;&gt;&nbsp;deadlineMapper)</span></div>
<div class="block">Returns a segue that accumulates pushed elements into a batch, permitting the batch to be yielded once a
 deadline expires. The deadline is recalculated from the current batch after each accumulation.

 <p>If the calculated deadline is an empty <code>Optional</code>, the previous deadline is retained (initially
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html#MAX" title="class or interface in java.time" class="external-link"><code>Instant.MAX</code></a>). If the calculated deadline is a present <code>Optional</code> containing <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html#MIN" title="class or interface in java.time" class="external-link"><code>Instant.MIN</code></a>,
 subsequent pushes will block until the current batch is yielded.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the upstream element type</dd>
<dd><code>A</code> - the batch type</dd>
<dt>Parameters:</dt>
<dd><code>batchSupplier</code> - a function that creates an initial (non-<code>null</code>) batch, called on initial push and on
                      pushes following a pull</dd>
<dd><code>accumulator</code> - a function that folds a pushed element into the current batch</dd>
<dd><code>deadlineMapper</code> - a function that optionally calculates a deadline for the current batch after accumulation</dd>
<dt>Returns:</dt>
<dd>a segue that accumulates pushed elements into a batch, permitting the batch to be yielded once a
 deadline expires</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="throttle(java.time.Duration,java.util.function.ToLongFunction,long,long)">
<h3>throttle</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">throttle</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;tokenInterval,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/ToLongFunction.html" title="class or interface in java.util.function" class="external-link">ToLongFunction</a>&lt;? super T&gt;&nbsp;costMapper,
 long&nbsp;tokenLimit,
 long&nbsp;bufferLimit)</span></div>
<div class="block">Returns a segue that uses a token-bucketing scheme to limit the rate at which pushed elements can be yielded.
 In this scheme, each pushed element calculates a cost, in tokens, to yield that element. Tokens accrue at a
 fixed rate, given by <code>tokenInterval</code>. The initial and maximum number of unused tokens is given by
 <code>tokenLimit</code> - tokens that accrue beyond this maximum are discarded. Pulls return when there are buffered
 elements and sufficient unused tokens to yield the element at the front of the buffer, using up those tokens.
 Elements that cost more than the <code>tokenLimit</code> temporarily increase the limit to match their cost when they
 reach the front of the buffer.

 <p>If a pushed element calculates a negative cost, an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> is thrown from the push.
 If a pushed element would cause the total cost of buffered elements to exceed <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html#MAX_VALUE" title="class or interface in java.lang" class="external-link"><code>Long.MAX_VALUE</code></a>, an
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ArithmeticException.html" title="class or interface in java.lang" class="external-link"><code>ArithmeticException</code></a> is thrown from the push.

 <p>Note that when insufficient tokens are available to yield the next element, pulls enter timed waits that may
 have limited resolution, typically in the range of milliseconds. This can lead to an observed emission rate
 significantly slower than what the function arguments allow.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>tokenInterval</code> - a (positive) interval at which tokens accrue</dd>
<dd><code>costMapper</code> - a function that calculates the (non-negative) cost, in tokens, to yield a pushed element</dd>
<dd><code>tokenLimit</code> - a (positive) initial and maximum number of unused tokens</dd>
<dd><code>bufferLimit</code> - a (positive) maximum number of buffered elements</dd>
<dt>Returns:</dt>
<dd>a segue that uses a token-bucketing scheme to limit the rate at which pushed elements can be yielded</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="delay(java.util.function.Function,int)">
<h3>delay</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">delay</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super T,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&gt;&nbsp;deadlineMapper,
 int&nbsp;bufferLimit)</span></div>
<div class="block">Returns a segue that calculates a deadline for each pushed element, buffering elements at least until their
 deadline expires. Elements with nearer deadlines may jump ahead of elements that arrived earlier.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>deadlineMapper</code> - a function that calculates a deadline for an element</dd>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dt>Returns:</dt>
<dd>a segue that calculates a deadline for each pushed element, buffering elements at least until their
 deadline expires</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="keepAlive(java.time.Duration,java.util.function.Supplier,int)">
<h3>keepAlive</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSegue.html" title="interface in io.avery.conveyor">Belt.StepSegue</a>&lt;T,<wbr>T&gt;</span>&nbsp;<span class="element-name">keepAlive</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Supplier.html" title="class or interface in java.util.function" class="external-link">Supplier</a>&lt;? extends T&gt;&nbsp;extraSupplier,
 int&nbsp;bufferLimit)</span></div>
<div class="block">Returns a segue that injects an additional element to respond to a pull if no elements are buffered and a timeout
 expired since the last pull. The first timeout begins when a pull meets an empty buffer.

 <p>The segue's sink can be safely pushed to and completed concurrently. Its source can be safely pulled and
 closed concurrently.

 <p>Example:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>TODO
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>timeout</code> - the (positive) timeout duration</dd>
<dd><code>extraSupplier</code> - a supplier used to generate injected elements</dd>
<dd><code>bufferLimit</code> - the (positive) maximum number of buffered elements</dd>
<dt>Returns:</dt>
<dd>a segue that injects an additional element to respond to a pull if no elements are buffered within a
 timeout since the last pull</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="streamSource(java.util.stream.Stream)">
<h3>streamSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;T&gt;</span>&nbsp;<span class="element-name">streamSource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends T&gt;&nbsp;stream)</span></div>
<div class="block">Returns a source that yields the elements from the given <code>stream</code>, and closes the stream when closed.
 When the source is first drained, it will push as many elements as possible from the stream to the sink.
 Subsequent attempts to drain the source will short-circuit. If the stream ever yields <code>null</code>, the source
 will throw a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link"><code>NullPointerException</code></a>.

 <p>The source does not adjust the parallelism setting of the stream. In particular, if the stream
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/BaseStream.html#isParallel()" title="class or interface in java.util.stream" class="external-link"><code>isParallel</code></a>, draining the source may issue concurrent pushes to the sink.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>stream</code> - the stream to yield from</dd>
<dt>Returns:</dt>
<dd>a source that yields the elements from the given <code>stream</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="iteratorSource(java.util.Iterator)">
<h3>iteratorSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;T&gt;</span>&nbsp;<span class="element-name">iteratorSource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;T&gt;&nbsp;iterator)</span></div>
<div class="block">Returns a source that yields the elements from the given <code>iterator</code>. Each time the source is pulled, it
 will advance the iterator, until the iterator is depleted. If the iterator ever yields <code>null</code>, the source
 will throw a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link"><code>NullPointerException</code></a>.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>iterator</code> - the iterator to yield from</dd>
<dt>Returns:</dt>
<dd>a source that yields the elements from the given <code>iterator</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="iteratorSource(java.util.Iterator,java.lang.AutoCloseable)">
<h3>iteratorSource</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="Belt.StepSource.html" title="interface in io.avery.conveyor">Belt.StepSource</a>&lt;T&gt;</span>&nbsp;<span class="element-name">iteratorSource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;T&gt;&nbsp;iterator,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a>&nbsp;onClose)</span></div>
<div class="block">Returns a source that yields the elements from the given <code>iterator</code>, and performs the given <code>onClose</code>
 operation when closed. Each time the source is pulled, it will advance the iterator, until the iterator is
 depleted. If the iterator ever yields <code>null</code>, the source will throw a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link"><code>NullPointerException</code></a>.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the element type</dd>
<dt>Parameters:</dt>
<dd><code>iterator</code> - the iterator to yield from</dd>
<dd><code>onClose</code> - the close operation</dd>
<dt>Returns:</dt>
<dd>a source that yields the elements from the given <code>iterator</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="scopeExecutor(java.util.concurrent.StructuredTaskScope)">
<h3>scopeExecutor</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a></span>&nbsp;<span class="element-name">scopeExecutor</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html" title="class or interface in java.util.concurrent" class="external-link">StructuredTaskScope</a><sup><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/StructuredTaskScope.html#preview-java.util.concurrent.StructuredTaskScope" title="class or interface in java.util.concurrent" class="external-link">PREVIEW</a></sup>&lt;?&gt;&nbsp;scope)</span></div>
<div class="block">Returns an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link"><code>Executor</code></a> that delegates execution to the given <code>scope</code>.

 <p>The resultant executor behaves as if defined by:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code>Executor executor = runnable -&gt; scope.fork(Executors.callable(runnable, null));
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>scope</code> - the given scope</dd>
<dt>Returns:</dt>
<dd>an Executor that delegates to the given scope</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if the scope is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="composedClose(java.util.stream.Stream)">
<h3>composedClose</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">composedClose</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Source.html" title="interface in io.avery.conveyor">Belt.Source</a>&lt;?&gt;&gt;&nbsp;sources)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Closes each source, in encounter order. If closing any source throws an exception, the first such exception will
 be caught and re-thrown before this method returns, with any subsequent exceptions suppressed onto it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sources</code> - the sources</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if closing any source throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="composedComplete(java.util.stream.Stream)">
<h3>composedComplete</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">composedComplete</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&gt;&nbsp;sinks)</span>
                             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Completes each sink normally, in encounter order. If completing any sink throws an exception, the first such
 exception will be caught and re-thrown before this method returns, with any subsequent exceptions suppressed onto
 it. If completing any sink throws an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link"><code>InterruptedException</code></a>, the thread interrupt status will be set before
 completing remaining sinks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sinks</code> - the sinks</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if completing any sink throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="composedCompleteAbruptly(java.util.stream.Stream,java.lang.Throwable)">
<h3>composedCompleteAbruptly</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">composedCompleteAbruptly</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="Belt.Sink.html" title="interface in io.avery.conveyor">Belt.Sink</a>&lt;?&gt;&gt;&nbsp;sinks,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</span>
                                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Completes each sink abruptly, passing the given <code>cause</code>, in encounter order. If completing any sink throws
 an exception, the first such exception will be caught and re-thrown before this method returns, with any
 subsequent exceptions suppressed onto it. If completing any sink throws an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link"><code>InterruptedException</code></a>, the
 thread interrupt status will be set before completing remaining sinks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sinks</code> - the sinks</dd>
<dd><code>cause</code> - the cause of the abrupt completion</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if completing any sink throws an exception</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
